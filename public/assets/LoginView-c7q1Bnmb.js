import{d as x,r as y,a as h,c as d,b as s,e as a,w as p,u as i,j as _,F as v,f as u,g as k,o as c,h as f,_ as b,i as C,k as V}from"./index-B8P_votN.js";const j={class:"flex flex-col items-center justify-center min-h-screen p-6 bg-gradient-to-b from-sky-500 to-blue-700"},N={class:"w-full max-w-md bg-white rounded-lg p-6"},S={class:"w-full"},B={class:"w-full"},F=["disabled"],E={key:0,class:"flex items-center justify-center"},I={key:1},T={class:"text-gray-600 text-center mt-4"},L=x({__name:"LoginView",setup(U){const m=C(),l=y(!1),o=h({email:"",pass:""});function w(){l.value=!0,fetch("http://localhost:3001/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o.email,pass:o.pass})}).then(async t=>{if(!t.ok){const g=await t.json();throw new Error(g.error||"Error al iniciar sesión")}const n=(await t.json()).token;localStorage.setItem("token",n),V(n).id_rol_id===2?m.push("/dashboard"):m.push("/"),o.email="",o.pass=""}).catch(t=>{alert(t.message),console.error(t)}).finally(()=>{l.value=!1})}return(t,e)=>{const n=k("router-link");return c(),d("div",j,[s("div",N,[e[7]||(e[7]=s("h3",{class:"text-xl font-bold text-center mb-6"},"Iniciar sesión",-1)),a(i(v),{"validation-schema":i(_),onSubmit:w,class:"flex flex-col mt-8"},{default:p(()=>[s("div",null,[e[2]||(e[2]=s("label",{class:"block mb-1 font-medium"},"Correo",-1)),s("p",S,[a(i(f),{modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=r=>o.email=r),name:"email",type:"email",class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"usuario@dominio.com"},null,8,["modelValue"])]),a(b,{name:"email"})]),s("div",null,[e[3]||(e[3]=s("label",{class:"block mb-1 font-medium"},"Contraseña",-1)),s("p",B,[a(i(f),{modelValue:o.pass,"onUpdate:modelValue":e[1]||(e[1]=r=>o.pass=r),name:"password",type:"password",class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"••••••••"},null,8,["modelValue"])]),a(b,{name:"password"})]),s("button",{disabled:l.value,type:"submit",class:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition w-full disabled:opacity-50 disabled:cursor-not-allowed"},[l.value?(c(),d("span",E,e[4]||(e[4]=[s("svg",{class:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" Cargando ")]))):(c(),d("span",I,"Iniciar sesión"))],8,F)]),_:1},8,["validation-schema"]),s("p",T,[e[6]||(e[6]=u(" ¿No tienes una cuenta? ")),a(n,{to:"/register",class:"text-blue-700 hover:underline"},{default:p(()=>e[5]||(e[5]=[u("Crear cuenta")])),_:1,__:[5]})])])])}}});export{L as default};
